# Camera FTP Companion 📸

让摄影工作流更简单！这是一款专为摄影师打造的智能FTP伴侣软件，它能让您的相机直接将照片传输到电脑，实现即拍即传。当新照片到达时，软件还可以智能识别并自动为您打开，让您的拍摄工作更加流畅自然。

## ✨ 功能特性

### 🚀 FTP服务器
- 内置轻量级FTP服务器，为相机传输优化，快速可靠
- 支持匿名访问，无需复杂配置，即插即用
- 灵活的端口设置，适应不同网络环境
- 完整的FTP功能支持（上传、下载、管理等）

### 👀 智能监控
- 实时监控上传目录，不错过每一张精彩照片
- 智能识别新上传的照片文件
- 支持自定义监控文件类型（JPG、RAW等）
- 智能文件状态检测，确保传输完整性

### 🎯 便捷预览
- 灵活的查看选项：
  - 使用系统默认图片查看器快速预览
  - 可配置专业处理软件打开（支持命令行参数）
- 可随心开启或关闭自动打开功能

## 📖 使用指南

### 基础设置
1. 选择照片存储位置：设定您希望存储照片的文件夹
2. 设置文件类型：指定需要监控的图片格式（如.jpg、.raw、.png等）

### FTP服务器配置
1. 端口设置：选择合适的FTP端口（建议使用21或其他未被占用的端口）
2. 访问方式：默认启用匿名访问，让相机端配置更简单

### 预览设置
1. 自动打开：根据需要开启或关闭自动预览功能
2. 查看工具：可选择专业的图片处理软件
   - 不设置则使用系统默认程序
   - 支持指定专业软件并传入文件路径

### 相机设置指南
1. 在相机网络设置中配置FTP连接：
   - 服务器：输入电脑IP地址
   - 端口：与软件设置保持一致
   - 用户名：输入anonymous或ftp
   - 密码：任意填写即可
2. 根据相机型号可能需要额外设置：
   - 传输模式：选择自动或即时上传
   - 图片格式：按需选择（JPEG、RAW等）

### 开始使用
1. 启动服务：点击"启动"按钮，开启FTP服务
2. 开始拍摄：相机拍摄的照片会自动传输到您的电脑
3. 查看照片：支持自动打开或手动浏览
4. 结束使用：点击"停止"按钮即可关闭服务

## 🔧 技术架构

### 整体设计
- 采用C#/WPF + C++混合开发，性能与界面兼具
- 核心功能封装为DLL，模块化设计
- 界面与功能分离，易于维护与扩展

### 核心模块
1. WPF界面层（C#）
   - 现代化的用户界面设计
   - 智能的配置管理系统
   - 流畅的核心功能调用

2. CoreFunctions核心层（C++）
   - 高效的FTP服务器管理
   - 可靠的文件系统监控
   - 智能的文件处理机制

3. fineftp-server模块
   - 专业的FTP服务器实现
   - 完整的协议支持

### 技术特点
1. FTP服务
   - 基于fineftp-server
   - 多线程处理机制
   - 支持匿名访问模式

2. 文件监控
   - 采用Windows API实现实时监控
   - 异步IO和事件通知
   - 智能的文件完整性检测

3. 进程管理
   - 灵活的文件打开机制
   - 支持命令行参数

### 数据流程
1. 文件上传流程
   相机连接 → 文件上传 → 监控检测 → 智能打开

2. FTP服务流程
   连接验证 → 数据传输 → 完成响应

## 📝 使用提示
1. 确保相机和电脑连接到同一网络
2. 建议使用管理员权限运行，避免权限问题
3. 匿名访问仅建议在可信网络使用
4. 使用前请确认选择的端口未被占用
5. 具体设置请参考相机使用手册